# ============================================================
# PLC 数据块映射配置文件
# ============================================================
# 用途: 定义 PLC DB 块的字段映射、偏移量、数据类型
# 优势: 前后端可独立开发，无需等待 PLC 调试完成
# 修改: 只需修改此文件，无需改动代码
# ============================================================

# DB6 - SlaveData (从站数据)
db6_slave_data:
  db_number: 6
  description: "从站设备数据采集"
  total_size: 49  # 总字节数
  
  # 称重传感器
  weigh_sensor:
    enabled: true
    description: "称重传感器数据"
    fields:
      - name: "base_gross_weigh"
        display_name: "基础毛重"
        offset: 0
        data_type: "WORD"      # WORD, DWORD, REAL, INT, DINT
        unit: "kg"
        scale: 0.1             # 缩放因子 (实际值 = 原始值 * scale)
        
      - name: "base_net_weigh"
        display_name: "基础净重"
        offset: 2
        data_type: "WORD"
        unit: "kg"
        scale: 0.1
        
      - name: "status_word"
        display_name: "状态字"
        offset: 4
        data_type: "WORD"
        unit: ""
        scale: 1
        
      - name: "adv_gross_weigh"
        display_name: "高级毛重"
        offset: 6
        data_type: "DWORD"
        unit: "kg"
        scale: 0.01
        
      - name: "adv_net_weigh"
        display_name: "高级净重"
        offset: 10
        data_type: "DWORD"
        unit: "kg"
        scale: 0.01
  
  # 流量计
  flow_meter:
    enabled: true
    description: "流量计数据"
    fields:
      - name: "rt_flow"
        display_name: "实时流量"
        offset: 14
        data_type: "DWORD"
        unit: "L/min"
        scale: 0.1
        
      - name: "total_flow"
        display_name: "累计流量"
        offset: 18
        data_type: "DWORD"
        unit: "L"
        scale: 1
        
      - name: "total_flow_milli"
        display_name: "累计流量小数"
        offset: 22
        data_type: "WORD"
        unit: "mL"
        scale: 1
  
  # Modbus 设备
  modbus_devkit:
    enabled: true
    description: "Modbus 电压电流采集"
    fields:
      - name: "voltage_ch1"
        display_name: "电压通道1"
        offset: 24
        data_type: "WORD"
        unit: "V"
        scale: 0.1
        
      - name: "voltage_ch2"
        display_name: "电压通道2"
        offset: 26
        data_type: "WORD"
        unit: "V"
        scale: 0.1
        
      - name: "ampere_ch1"
        display_name: "电流通道1"
        offset: 28
        data_type: "WORD"
        unit: "A"
        scale: 0.01
        
      - name: "ampere_ch2"
        display_name: "电流通道2"
        offset: 30
        data_type: "WORD"
        unit: "A"
        scale: 0.01
  
  # 水表
  water_meter:
    enabled: true
    description: "水表数据"
    fields:
      - name: "flow"
        display_name: "流量"
        offset: 32
        data_type: "DWORD"
        unit: "L/min"
        scale: 0.1
        
      - name: "total_flow"
        display_name: "累计流量"
        offset: 36
        data_type: "DWORD"
        unit: "L"
        scale: 1
  
  # 测试数组
  test_array:
    enabled: false
    description: "测试数组（可选）"
    fields:
      - name: "test_data"
        display_name: "测试数据"
        offset: 40
        data_type: "ARRAY"
        array_size: 9
        unit: ""
        scale: 1

# ============================================================
# 未来扩展: DB10 - 辊道窑数据 (示例)
# ============================================================
db10_roller_kiln:
  db_number: 10
  description: "辊道窑温度与能耗数据"
  total_size: 100
  enabled: false  # 暂未启用，等待 PLC 配置
  
  # 温区数据
  temperature_zones:
    enabled: false
    description: "温度分区数据"
    fields:
      - name: "zone_1_temp"
        display_name: "温区1温度"
        offset: 0
        data_type: "WORD"
        unit: "°C"
        scale: 0.1
        
      - name: "zone_2_temp"
        display_name: "温区2温度"
        offset: 2
        data_type: "WORD"
        unit: "°C"
        scale: 0.1
      # ... 可继续添加温区3-12

# ============================================================
# 未来扩展: DB20 - 回转窑数据 (示例)
# ============================================================
db20_rotary_kiln:
  db_number: 20
  description: "回转窑数据"
  total_size: 200
  enabled: false
  
  temperature_zones:
    enabled: false
    description: "8温区数据"
    fields: []  # 待 PLC 定义后补充

# ============================================================
# 未来扩展: DB30 - SCR 设备数据 (示例)
# ============================================================
db30_scr_equipment:
  db_number: 30
  description: "SCR 风机、水泵、燃气数据"
  total_size: 150
  enabled: false
  
  fans:
    enabled: false
    description: "风机能耗数据"
    fields: []  # 待定义
