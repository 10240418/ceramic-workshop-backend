# ============================================================
# DB3 状态位配置文件 - 回转窑(料仓)设备状态监控
# ============================================================
# 根据 PLC 截图中的 KilnState [DB3] 结构
# 每个模块状态: Error(Bool) + Status(Word) = 4字节
# ============================================================

db_config:
  db_number: 3
  db_name: "KilnState"
  total_size: 148
  description: "回转窑(料仓)设备状态数据块"

# ============================================================
# 模块状态结构说明
# ============================================================
# ModuleStatus: Error(Bool, offset 0) + Status(Word, offset 2) = 4 bytes
#
# 设备类型:
#   - Kiln_Have (短料仓有称重): 4个模块状态 = 16字节
#     WeighSensor + Temperature + ElectricityMeter + ElectricityMeter_I
#   - Kiln_NoHave (短料仓无称重): 3个模块状态 = 12字节
#     Temperature + ElectricityMeter + ElectricityMeter_I
#   - LongKiln_Have (长料仓有称重): 5个模块状态 = 20字节
#     WeighSensor + Temperature_1 + Temperature_2 + ElectricityMeter + ElectricityMeter_I
# ============================================================

# ============================================================
# Kiln_Have_1~4 (短料仓有称重) - 每个16字节
# 偏移: 0, 16, 32, 48
# 模块顺序: WeighSensor(4) + Temperature(4) + ElectricityMeter(4) + ElectricityMeter_I(4)
# ============================================================
kiln_have:
  - device_id: "status_kiln_have_1"
    device_name: "1号短料仓状态(有称重)"
    device_type: "kiln_have"
    start_offset: 0
    total_size: 16
    modules:
      - module_type: "ModuleStatus"
        offset: 0
        size: 4
        tag: "weigh_sensor"
        description: "称重传感器状态"
      - module_type: "ModuleStatus"
        offset: 4
        size: 4
        tag: "temperature"
        description: "温度传感器状态"
      - module_type: "ModuleStatus"
        offset: 8
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 12
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

  - device_id: "status_kiln_have_2"
    device_name: "2号短料仓状态(有称重)"
    device_type: "kiln_have"
    start_offset: 16
    total_size: 16
    modules:
      - module_type: "ModuleStatus"
        offset: 16
        size: 4
        tag: "weigh_sensor"
        description: "称重传感器状态"
      - module_type: "ModuleStatus"
        offset: 20
        size: 4
        tag: "temperature"
        description: "温度传感器状态"
      - module_type: "ModuleStatus"
        offset: 24
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 28
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

  - device_id: "status_kiln_have_3"
    device_name: "3号短料仓状态(有称重)"
    device_type: "kiln_have"
    start_offset: 32
    total_size: 16
    modules:
      - module_type: "ModuleStatus"
        offset: 32
        size: 4
        tag: "weigh_sensor"
        description: "称重传感器状态"
      - module_type: "ModuleStatus"
        offset: 36
        size: 4
        tag: "temperature"
        description: "温度传感器状态"
      - module_type: "ModuleStatus"
        offset: 40
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 44
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

  - device_id: "status_kiln_have_4"
    device_name: "4号短料仓状态(有称重)"
    device_type: "kiln_have"
    start_offset: 48
    total_size: 16
    modules:
      - module_type: "ModuleStatus"
        offset: 48
        size: 4
        tag: "weigh_sensor"
        description: "称重传感器状态"
      - module_type: "ModuleStatus"
        offset: 52
        size: 4
        tag: "temperature"
        description: "温度传感器状态"
      - module_type: "ModuleStatus"
        offset: 56
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 60
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

# ============================================================
# Kiln_NoHave_1~2 (短料仓无称重) - 每个12字节
# 偏移: 64, 76
# 模块顺序: Temperature(4) + ElectricityMeter(4) + ElectricityMeter_I(4)
# ============================================================
kiln_no_have:
  - device_id: "status_kiln_nohave_1"
    device_name: "1号短料仓状态(无称重)"
    device_type: "kiln_no_have"
    start_offset: 64
    total_size: 12
    modules:
      - module_type: "ModuleStatus"
        offset: 64
        size: 4
        tag: "temperature"
        description: "温度传感器状态"
      - module_type: "ModuleStatus"
        offset: 68
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 72
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

  - device_id: "status_kiln_nohave_2"
    device_name: "2号短料仓状态(无称重)"
    device_type: "kiln_no_have"
    start_offset: 76
    total_size: 12
    modules:
      - module_type: "ModuleStatus"
        offset: 76
        size: 4
        tag: "temperature"
        description: "温度传感器状态"
      - module_type: "ModuleStatus"
        offset: 80
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 84
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

# ============================================================
# LongKiln_Have_1~3 (长料仓有称重) - 每个20字节
# 偏移: 88, 108, 128
# 模块顺序: WeighSensor(4) + Temperature_1(4) + Temperature_2(4) + ElectricityMeter(4) + ElectricityMeter_I(4)
# ============================================================
long_kiln_have:
  - device_id: "status_longkiln_have_1"
    device_name: "1号长料仓状态(有称重)"
    device_type: "long_kiln_have"
    start_offset: 88
    total_size: 20
    modules:
      - module_type: "ModuleStatus"
        offset: 88
        size: 4
        tag: "weigh_sensor"
        description: "称重传感器状态"
      - module_type: "ModuleStatus"
        offset: 92
        size: 4
        tag: "temperature_1"
        description: "温度传感器1状态"
      - module_type: "ModuleStatus"
        offset: 96
        size: 4
        tag: "temperature_2"
        description: "温度传感器2状态"
      - module_type: "ModuleStatus"
        offset: 100
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 104
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

  - device_id: "status_longkiln_have_2"
    device_name: "2号长料仓状态(有称重)"
    device_type: "long_kiln_have"
    start_offset: 108
    total_size: 20
    modules:
      - module_type: "ModuleStatus"
        offset: 108
        size: 4
        tag: "weigh_sensor"
        description: "称重传感器状态"
      - module_type: "ModuleStatus"
        offset: 112
        size: 4
        tag: "temperature_1"
        description: "温度传感器1状态"
      - module_type: "ModuleStatus"
        offset: 116
        size: 4
        tag: "temperature_2"
        description: "温度传感器2状态"
      - module_type: "ModuleStatus"
        offset: 120
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 124
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

  - device_id: "status_longkiln_have_3"
    device_name: "3号长料仓状态(有称重)"
    device_type: "long_kiln_have"
    start_offset: 128
    total_size: 20
    modules:
      - module_type: "ModuleStatus"
        offset: 128
        size: 4
        tag: "weigh_sensor"
        description: "称重传感器状态"
      - module_type: "ModuleStatus"
        offset: 132
        size: 4
        tag: "temperature_1"
        description: "温度传感器1状态"
      - module_type: "ModuleStatus"
        offset: 136
        size: 4
        tag: "temperature_2"
        description: "温度传感器2状态"
      - module_type: "ModuleStatus"
        offset: 140
        size: 4
        tag: "electricity_meter"
        description: "电表状态"
      - module_type: "ModuleStatus"
        offset: 144
        size: 4
        tag: "electricity_meter_i"
        description: "电流电表状态"

# ============================================================
# DB块布局总结
# ============================================================
# Offset 0-15:    Kiln_Have_1 (16 bytes)
# Offset 16-31:   Kiln_Have_2 (16 bytes)
# Offset 32-47:   Kiln_Have_3 (16 bytes)
# Offset 48-63:   Kiln_Have_4 (16 bytes)
# Offset 64-75:   Kiln_NoHave_1 (12 bytes)
# Offset 76-87:   Kiln_NoHave_2 (12 bytes)
# Offset 88-107:  LongKiln_Have_1 (20 bytes)
# Offset 108-127: LongKiln_Have_2 (20 bytes)
# Offset 128-147: LongKiln_Have_3 (20 bytes)
# ============================================================
# 总计: 4×16 + 2×12 + 3×20 = 64 + 24 + 60 = 148 bytes
# ============================================================
