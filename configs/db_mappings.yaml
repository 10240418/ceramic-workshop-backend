# ============================================================
# DB块映射配置文件
# ============================================================
# 用于配置 PLC 中各个 DB 块的映射关系
# 修改此文件后无需修改 Python 代码，重启服务即可生效
# ============================================================

# ============================================================
# 轮询配置
# ============================================================
polling_config:
  poll_interval: 7  # 轮询间隔 (秒)
  batch_write_size: 20  # 批量写入间隔 (次数) - 避免缓冲区溢出

# ============================================================
# 状态位配置 - 用于检测设备通信状态
# ============================================================
status_config:
  enabled: true
  db_number: 1  # 状态位所在的 DB 块号
  total_size: 268  # 状态块大小 (根据config_status.yaml计算)
  config_file: "configs/config_status.yaml"
  description: "设备通信状态监控"

# ============================================================
# 数据块映射
# ============================================================
db_mappings:
  # DB8 - 料仓设备
  - db_number: 8
    db_name: "DB8_Hoppers"
    total_size: 626
    config_file: "configs/config_hoppers.yaml"
    parser_class: "HopperParser"
    enabled: true
    description: "9个料仓设备（4短+2无+3长）"
  
  # DB9 - 辊道窑
  - db_number: 9
    db_name: "DB9_RollerKiln"
    total_size: 348
    config_file: "configs/config_roller_kiln.yaml"
    parser_class: "RollerKilnParser"
    enabled: true
    description: "辊道窑（6温度+6电表）"
  
  # DB10 - SCR设备和风机
  - db_number: 10
    db_name: "DB10_SCR_Fans"
    total_size: 244
    config_file: "configs/config_scr_fans.yaml"
    parser_class: "SCRFanParser"
    enabled: true
    description: "SCR设备和风机（2SCR+2风机）"
